<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coming Soon - Urbanta</title>
    <link rel="canonical" href="https://www.urbanta.in/coming-soon/">
    <meta name="description" content="Currently piloting in Bangalore + Jaipur. We're building an army of verified contractors and suppliers. Early access customers get extra benefits.">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Coming Soon - Urbanta">
    <meta property="og:description" content="Currently piloting in Bangalore + Jaipur. We're building an army of verified contractors and suppliers. Early access customers get extra benefits.">
    <meta property="og:url" content="https://www.urbanta.in/coming-soon/">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://www.urbanta.in/og-image.jpg">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Coming Soon - Urbanta">
    <meta name="twitter:description" content="Currently piloting in Bangalore + Jaipur. We're building an army of verified contractors and suppliers. Early access customers get extra benefits.">
    <meta name="twitter:image" content="https://www.urbanta.in/og-image.jpg">
    
    <link rel="stylesheet" href="../styles.css?v=23">
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <script>
        // Apply theme immediately before page renders
        (function() {
            const savedTheme = localStorage.getItem('urbanta_theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="container">
                <div class="brand">
                    <div class="brand-left">
                        <div>
                            <a href="../" class="brand-name">Urbanta</a>
                            <div class="brand-tag">Building trust, one project at a time</div>
                        </div>
                    </div>
                    <div class="header-controls">
                        <div class="header-right">
                            <a href="../support/" class="btn secondary header-btn">Support</a>
                            <label class="switch" title="Toggle light mode">
                                <input type="checkbox" id="themeSwitch" />
                                <span class="knob"></span>
                            </label>
                            <span class="switch-label">Light mode</span>
                            <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                                <span></span>
                                <span></span>
                                <span></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <h3>Menu</h3>
                    <button class="mobile-menu-close" id="mobileMenuClose">√ó</button>
                </div>
                <nav class="mobile-menu-nav">
                    <a href="/" class="mobile-menu-link">Home</a>
                    <a href="/coming-soon/" class="mobile-menu-link">For Customers</a>
                    <a href="/professionals/" class="mobile-menu-link">For Professionals</a>
                    <a href="/support/" class="mobile-menu-link">Support</a>
                    <a href="/faq/" class="mobile-menu-link">FAQ</a>
                </nav>
            </div>
        </div>

        <!-- Coming Soon Section -->
        <main class="coming-soon-section">
            <div class="coming-soon-container">
                <div class="coming-soon-content">
                    <div class="coming-soon-icon">
                        <div class="construction-icon">üèóÔ∏è</div>
                    </div>
                    
                    <h1 class="coming-soon-title">Looking to get your house renovated? You've reached the right place!</h1>
                    
                    <p class="coming-soon-subtitle">
                        We're piloting in <span class="highlight">Bangalore + Jaipur</span> with pre-vetted contractors who pass our <span class="highlight">3-step verification</span> (KYC + Portfolio + References). <strong>No more guessing games ‚Äì just reliable professionals!</strong>
                    </p>
                    
                    <div class="coming-soon-features">
                        <div class="feature-item">
                            <div class="feature-icon">‚úÖ</div>
                            <span>Verified Professionals</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üí∞</div>
                            <span>Transparent Pricing</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üõ°Ô∏è</div>
                            <span>Quality Guarantee</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üì±</div>
                            <span>Easy Booking</span>
                        </div>
                    </div>
                    
                    <div class="coming-soon-cta">
                        <p class="cta-text">Want to be notified when we launch?</p>
                        <div class="email-signup">
                            <input type="email" id="emailInput" placeholder="Enter your email" class="email-input">
                            <button id="notifyBtn" class="notify-btn">Notify Me</button>
                        </div>
                        <p class="signup-note">We'll send you updates and early access when we're ready!</p>
                    </div>
                    
                    <div class="back-to-home">
                        <a href="../" class="back-btn">‚Üê Back to Home</a>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-brand">
                        <div class="brand-name">Urbanta</div>
                        <p class="footer-tagline">Building trust in construction</p>
                    </div>
                    <div class="footer-links">
                        <a href="../privacy/">Privacy</a>
                        <a href="../terms/">Terms</a>
                        <a href="../support/">Support</a>
                        <a href="../faq/">FAQ</a>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2025 Urbanta. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Thank You Modal -->
    <div id="thankYouModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon">üéâ</div>
                <h2>Thank You!</h2>
            </div>
            <div class="modal-body">
                <p>We've received your email and will notify you as soon as we launch!</p>
                <p>Get ready to revolutionize your home improvement experience with verified contractors and suppliers.</p>
                <div class="modal-features">
                    <div class="feature-highlight">
                        <span class="feature-icon">‚úÖ</span>
                        <span>Verified Professionals</span>
                    </div>
                    <div class="feature-highlight">
                        <span class="feature-icon">üí∞</span>
                        <span>Transparent Pricing</span>
                    </div>
                    <div class="feature-highlight">
                        <span class="feature-icon">üõ°Ô∏è</span>
                        <span>Quality Guarantee</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="goToLanding()" class="btn primary">Awesome!</button>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header error">
                <div class="modal-icon">‚ö†Ô∏è</div>
                <h2>Oops!</h2>
            </div>
            <div class="modal-body">
                <p id="errorMessage">Something went wrong. Please try again.</p>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('errorModal')" class="btn secondary">Try Again</button>
            </div>
        </div>
    </div>

    <script src="../env-config.js"></script>
    <script src="../rate-limiter.js"></script>
    <script src="../supabase-config.js"></script>
    <script src="../supabase.min.js"></script>
    <script src="../script.js?v=21"></script>
    
    <script>
        // Theme functionality
        document.addEventListener("DOMContentLoaded", () => {
            applyThemeFromStorage();
            const themeBtn = document.getElementById("themeSwitch");
            themeBtn && themeBtn.addEventListener("change", (e) => setTheme(e.target.checked ? "light" : "dark"));
            
            // Mobile menu functionality
            const hamburger = document.getElementById('hamburger');
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuClose = document.getElementById('mobileMenuClose');
            
            if (hamburger && mobileMenu) {
                hamburger.addEventListener('click', () => {
                    mobileMenu.classList.add('active');
                    hamburger.classList.add('active');
                });
            }
            
            if (mobileMenuClose && mobileMenu) {
                mobileMenuClose.addEventListener('click', () => {
                    mobileMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                });
            }
            
            // Close mobile menu when clicking outside
            if (mobileMenu) {
                mobileMenu.addEventListener('click', (e) => {
                    if (e.target === mobileMenu) {
                        mobileMenu.classList.remove('active');
                        hamburger.classList.remove('active');
                    }
                });
            }
        });

        // Theme Toggle Functionality
        const themeSwitch = document.getElementById("themeSwitch");
        if (themeSwitch) {
            // Apply saved theme immediately
            const savedTheme = localStorage.getItem("urbanta_theme") || "light";
            document.documentElement.setAttribute("data-theme", savedTheme);
            themeSwitch.checked = (savedTheme === "light");
            
            // Add event listener
            themeSwitch.addEventListener("change", function(e) {
                const theme = e.target.checked ? "light" : "dark";
                document.documentElement.setAttribute("data-theme", theme);
                localStorage.setItem("urbanta_theme", theme);
            });
        }

        // Email signup functionality
        document.getElementById('notifyBtn').addEventListener('click', async () => {
            const email = document.getElementById('emailInput').value.trim();
            const notifyBtn = document.getElementById('notifyBtn');
            
            if (!email) {
                alert('Please enter your email address');
                return;
            }
            
            if (!isValidEmail(email)) {
                alert('Please enter a valid email address');
                return;
            }
            
            // Initialize Supabase client
            const supabaseUrl = 'https://ehrwdtzyisrfheamigrr.supabase.co';
            const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVocndkdHp5aXNyZmhlYW1pZ3JyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NDcyMTMsImV4cCI6MjA3MzMyMzIxM30.TWWD8baDpisClSvKaTZrCCor8hsIwA4DJccQm76aQcI';
            
            const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);
            
            // Show subscribing state immediately
            notifyBtn.textContent = 'Subscribing...';
            notifyBtn.disabled = true;
            
            try {
                console.log('Starting email signup process...');
                console.log('Email:', email);
                console.log('Supabase client:', supabaseClient);
                
                // Try email_signups table first, fallback to customers table
                let data, error;
                
                try {
                    console.log('Trying email_signups table...');
                    // Try the new email_signups table
                    const result = await supabaseClient
                        .from('email_signups')
                        .insert([{ 
                            email: email,
                            source: 'coming-soon',
                            created_at: new Date().toISOString(),
                            status: 'pending',
                            metadata: {
                                page: 'coming-soon',
                                user_agent: navigator.userAgent,
                                timestamp: new Date().toISOString()
                            }
                        }]);
                    data = result.data;
                    error = result.error;
                    console.log('email_signups result:', { data, error });
                } catch (tableError) {
                    console.log('email_signups table not found, using customers table');
                    console.log('Table error:', tableError);
                    // Fallback to customers table
                    const result = await supabaseClient
                        .from('customers')
                        .insert([{ 
                            email: email, 
                            name: 'Coming Soon Signup',
                            phone: '',
                            service: 'coming-soon',
                            message: 'Interested in launch notifications',
                            created_at: new Date().toISOString(),
                            status: 'new'
                        }]);
                    data = result.data;
                    error = result.error;
                    console.log('customers result:', { data, error });
                }
                
                if (error) {
                    console.error('Database Error:', error);
                    showErrorModal('Database error: ' + error.message);
                } else {
                    console.log('Success! Email stored:', data);
                    showThankYouModal();
                    document.getElementById('emailInput').value = '';
                }
            } catch (err) {
                console.error('Unexpected Error:', err);
                showErrorModal('Unexpected error: ' + err.message);
            } finally {
                notifyBtn.textContent = 'Notify Me';
                notifyBtn.disabled = false;
            }
        });
        
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // Modal functions
        function showThankYouModal() {
            const modal = document.getElementById('thankYouModal');
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }
        
        function showErrorModal(message) {
            const modal = document.getElementById('errorModal');
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = message;
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('show');
            document.body.style.overflow = 'auto';
        }
        
        function goToLanding() {
            // Close the modal first
            closeModal('thankYouModal');
            // Redirect to landing page
            window.location.href = '../';
        }
        
        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target.id === 'thankYouModal' || event.target.id === 'errorModal') {
                event.target.classList.remove('show');
                document.body.style.overflow = 'auto';
            }
        });
    </script>
</body>
</html>
